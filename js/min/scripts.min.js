function checkY(){$(window).scrollTop()>startY?$(".top").slideDown():$(".top").slideUp()}var movieApp={};movieApp.api_key="52f9d260df3456e267b10b5b7a4645eb",movieApp.init=function(){movieApp.grabConfig(),movieApp.getSessionId(),movieApp.genres(),$("body").on("change","input[type = radio]",function(){var e=$(this).val(),i=$(this).attr("id").split("-")[0].replace("movie","");movieApp.ratingHandler(e,i),$(".modalDialog").addClass("visible")}),$("body").on("change","select",function(){var e=$(this).val(),i=$(this).find(":selected").text();$("h2").text(i+" Movies"),movieApp.grabTopRated(e)})},movieApp.genres=function(){var e="http://api.themoviedb.org/3/genre/list";$.ajax(e,{type:"GET",dataType:"jsonp",data:{api_key:movieApp.api_key},success:function(e){console.log(e.genres);for(var i=0;i<e.genres.length;i++)$("<option>").attr("value",e.genres[i].id).text(e.genres[i].name).appendTo("select")}})},movieApp.grabConfig=function(){var e="http://api.themoviedb.org/3/configuration";$.ajax(e,{type:"GET",dataType:"jsonp",data:{api_key:movieApp.api_key},success:function(e){movieApp.config=e,movieApp.grabTopRated()}})},movieApp.grabTopRated=function(e){var i="http://api.themoviedb.org/3/genre/"+e+"/movies";$.ajax(i,{type:"GET",dataType:"jsonp",data:{api_key:movieApp.api_key,page:5},success:function(e){movieApp.displayMovies(e.results)}})},movieApp.displayMovies=function(e){$(".allMovies").empty();for(var i=0;i<e.length;i++){var o=$("<img>").attr("src",movieApp.config.images.base_url+"w500"+e[i].poster_path),a=$("<h3>").text(e[i].title),t=$("fieldset.rateMovie")[0].outerHTML;t=t.replace(/star/g,"movie"+e[i].id+"-star"),t=t.replace(/rating/g,"rating-"+e[i].id);var p=$("<div>").addClass("movie");p.append(o,a,t),$(".allMovies").append(p)}},movieApp.ratingHandler=function(e,i){$.ajax("http://api.themoviedb.org/3/movie/"+i+"/rating",{type:"POST",data:{api_key:movieApp.api_key,guest_session_id:movieApp.session_id,value:2*e},success:function(){$("a.close").on("click",function(){$(".modalDialog").removeClass("visible")})}})},movieApp.getSessionId=function(){$.ajax("http://api.themoviedb.org/3/authentication/guest_session/new",{data:{api_key:movieApp.api_key},type:"GET",dataType:"jsonp",success:function(e){movieApp.session_id=e.guest_session_id}})};var startY=450;$(window).scroll(function(){checkY()}),checkY(),$(function(){movieApp.init(),$("a.top").smoothScroll({offset:-80})});